<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Using dplyr | Data Analysis and Processing with R based on IBIS data</title>
  <meta name="description" content="4 Using dplyr | Data Analysis and Processing with R based on IBIS data" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Using dplyr | Data Analysis and Processing with R based on IBIS data" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="mushroom.jpg" />
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Using dplyr | Data Analysis and Processing with R based on IBIS data" />
  
  
  <meta name="twitter:image" content="mushroom.jpg" />

<meta name="author" content="Kevin Donovan" />


<meta name="date" content="2019-10-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="objects-and-functions.html"/>
<link rel="next" href="creating-graphs-with-ggplot2.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Index</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#preface"><i class="fa fa-check"></i><b>1.1</b> Preface</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Introducing R and Rstudio</a><ul>
<li class="chapter" data-level="2.1" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html#intro"><i class="fa fa-check"></i><b>2.1</b> Intro</a></li>
<li class="chapter" data-level="2.2" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html#why-use-r-for-data-analysis"><i class="fa fa-check"></i><b>2.2</b> Why use R for data analysis?</a></li>
<li class="chapter" data-level="2.3" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html#r-and-rstudio-what-is-the-difference"><i class="fa fa-check"></i><b>2.3</b> R and RStudio: What is the difference?</a></li>
<li class="chapter" data-level="2.4" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>2.4</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="2.5" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html#the-interface-of-rstudio"><i class="fa fa-check"></i><b>2.5</b> The interface of RStudio</a><ul>
<li class="chapter" data-level="2.5.1" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html#console"><i class="fa fa-check"></i><b>2.5.1</b> Console</a></li>
<li class="chapter" data-level="2.5.2" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html#scripts"><i class="fa fa-check"></i><b>2.5.2</b> Scripts</a></li>
<li class="chapter" data-level="2.5.3" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html#rmd-files"><i class="fa fa-check"></i><b>2.5.3</b> RMD Files</a></li>
<li class="chapter" data-level="2.5.4" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html#environment"><i class="fa fa-check"></i><b>2.5.4</b> Environment</a></li>
<li class="chapter" data-level="2.5.5" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html#plots-packages-and-help"><i class="fa fa-check"></i><b>2.5.5</b> Plots, Packages, and Help</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introducing-r-and-rstudio.html"><a href="introducing-r-and-rstudio.html#file-directories-in-r"><i class="fa fa-check"></i><b>2.6</b> File Directories in R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="objects-and-functions.html"><a href="objects-and-functions.html"><i class="fa fa-check"></i><b>3</b> Objects and Functions</a><ul>
<li class="chapter" data-level="3.1" data-path="objects-and-functions.html"><a href="objects-and-functions.html#intro-1"><i class="fa fa-check"></i><b>3.1</b> Intro</a></li>
<li class="chapter" data-level="3.2" data-path="objects-and-functions.html"><a href="objects-and-functions.html#functions"><i class="fa fa-check"></i><b>3.2</b> Functions</a></li>
<li class="chapter" data-level="3.3" data-path="objects-and-functions.html"><a href="objects-and-functions.html#objects"><i class="fa fa-check"></i><b>3.3</b> Objects</a></li>
<li class="chapter" data-level="3.4" data-path="objects-and-functions.html"><a href="objects-and-functions.html#object-classes-and-types"><i class="fa fa-check"></i><b>3.4</b> Object classes and types</a><ul>
<li class="chapter" data-level="3.4.1" data-path="objects-and-functions.html"><a href="objects-and-functions.html#vectors"><i class="fa fa-check"></i><b>3.4.1</b> Vectors</a></li>
<li class="chapter" data-level="3.4.2" data-path="objects-and-functions.html"><a href="objects-and-functions.html#matricies"><i class="fa fa-check"></i><b>3.4.2</b> Matricies</a></li>
<li class="chapter" data-level="3.4.3" data-path="objects-and-functions.html"><a href="objects-and-functions.html#lists"><i class="fa fa-check"></i><b>3.4.3</b> Lists</a></li>
<li class="chapter" data-level="3.4.4" data-path="objects-and-functions.html"><a href="objects-and-functions.html#data-frames"><i class="fa fa-check"></i><b>3.4.4</b> Data Frames</a></li>
<li class="chapter" data-level="3.4.5" data-path="objects-and-functions.html"><a href="objects-and-functions.html#types"><i class="fa fa-check"></i><b>3.4.5</b> Types</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="objects-and-functions.html"><a href="objects-and-functions.html#subsetting"><i class="fa fa-check"></i><b>3.5</b> Subsetting</a></li>
<li class="chapter" data-level="3.6" data-path="objects-and-functions.html"><a href="objects-and-functions.html#base-r"><i class="fa fa-check"></i><b>3.6</b> Base R</a></li>
<li class="chapter" data-level="3.7" data-path="objects-and-functions.html"><a href="objects-and-functions.html#environment-1"><i class="fa fa-check"></i><b>3.7</b> Environment</a></li>
<li class="chapter" data-level="3.8" data-path="objects-and-functions.html"><a href="objects-and-functions.html#putting-it-all-together-read.csv"><i class="fa fa-check"></i><b>3.8</b> Putting It All Together: read.csv</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="using-dplyr.html"><a href="using-dplyr.html"><i class="fa fa-check"></i><b>4</b> Using dplyr</a><ul>
<li class="chapter" data-level="4.1" data-path="using-dplyr.html"><a href="using-dplyr.html#intro-2"><i class="fa fa-check"></i><b>4.1</b> Intro</a></li>
<li class="chapter" data-level="4.2" data-path="using-dplyr.html"><a href="using-dplyr.html#dplyr-functions"><i class="fa fa-check"></i><b>4.2</b> dplyr Functions</a><ul>
<li class="chapter" data-level="4.2.1" data-path="using-dplyr.html"><a href="using-dplyr.html#select-filter-and-arrange"><i class="fa fa-check"></i><b>4.2.1</b> Select, filter, and arrange</a></li>
<li class="chapter" data-level="4.2.2" data-path="using-dplyr.html"><a href="using-dplyr.html#mutate-and-summarize"><i class="fa fa-check"></i><b>4.2.2</b> Mutate and summarize</a></li>
<li class="chapter" data-level="4.2.3" data-path="using-dplyr.html"><a href="using-dplyr.html#spread-gather-separate-and-unite"><i class="fa fa-check"></i><b>4.2.3</b> Spread, Gather, Separate and Unite</a></li>
<li class="chapter" data-level="4.2.4" data-path="using-dplyr.html"><a href="using-dplyr.html#renaming-variables"><i class="fa fa-check"></i><b>4.2.4</b> Renaming variables</a></li>
<li class="chapter" data-level="4.2.5" data-path="using-dplyr.html"><a href="using-dplyr.html#using-the-pipe"><i class="fa fa-check"></i><b>4.2.5</b> Using the pipe</a></li>
<li class="chapter" data-level="4.2.6" data-path="using-dplyr.html"><a href="using-dplyr.html#editing-factor-variables-recode-and-relevel"><i class="fa fa-check"></i><b>4.2.6</b> Editing factor variables: recode() and relevel()</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html"><i class="fa fa-check"></i><b>5</b> Creating Graphs With ggplot2</a><ul>
<li class="chapter" data-level="5.1" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#base-r-vs.-ggplot2"><i class="fa fa-check"></i><b>5.1</b> Base R vs. ggplot2</a></li>
<li class="chapter" data-level="5.2" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#ggplot2"><i class="fa fa-check"></i><b>5.2</b> ggplot2</a><ul>
<li class="chapter" data-level="5.2.1" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#introduction"><i class="fa fa-check"></i><b>5.2.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#ggplot-aesthetics"><i class="fa fa-check"></i><b>5.3</b> ggplot Aesthetics</a><ul>
<li class="chapter" data-level="5.3.1" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#scatterplot"><i class="fa fa-check"></i><b>5.3.1</b> Scatterplot</a></li>
<li class="chapter" data-level="5.3.2" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#colors-in-r"><i class="fa fa-check"></i><b>5.3.2</b> Colors in R</a></li>
<li class="chapter" data-level="5.3.3" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#line-of-best-fit"><i class="fa fa-check"></i><b>5.3.3</b> Line of best fit</a></li>
<li class="chapter" data-level="5.3.4" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#box-and-whisker"><i class="fa fa-check"></i><b>5.3.4</b> Box and whisker</a></li>
<li class="chapter" data-level="5.3.5" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#barchart"><i class="fa fa-check"></i><b>5.3.5</b> Barchart</a></li>
<li class="chapter" data-level="5.3.6" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#other-aesthetics"><i class="fa fa-check"></i><b>5.3.6</b> Other aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#additional-customization"><i class="fa fa-check"></i><b>5.4</b> Additional customization</a><ul>
<li class="chapter" data-level="5.4.1" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#titles-and-labels"><i class="fa fa-check"></i><b>5.4.1</b> Titles and Labels</a></li>
<li class="chapter" data-level="5.4.2" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#colors"><i class="fa fa-check"></i><b>5.4.2</b> Colors</a></li>
<li class="chapter" data-level="5.4.3" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#sizes-and-shapes"><i class="fa fa-check"></i><b>5.4.3</b> Sizes and shapes</a></li>
<li class="chapter" data-level="5.4.4" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#themes"><i class="fa fa-check"></i><b>5.4.4</b> Themes</a></li>
<li class="chapter" data-level="5.4.5" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#reversing-the-axes"><i class="fa fa-check"></i><b>5.4.5</b> Reversing the axes</a></li>
<li class="chapter" data-level="5.4.6" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#facets"><i class="fa fa-check"></i><b>5.4.6</b> Facets</a></li>
<li class="chapter" data-level="5.4.7" data-path="creating-graphs-with-ggplot2.html"><a href="creating-graphs-with-ggplot2.html#exporting-your-plot"><i class="fa fa-check"></i><b>5.4.7</b> Exporting your plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="working-with-tables-in-r.html"><a href="working-with-tables-in-r.html"><i class="fa fa-check"></i><b>6</b> Working with Tables in R</a><ul>
<li class="chapter" data-level="6.1" data-path="working-with-tables-in-r.html"><a href="working-with-tables-in-r.html#intro-3"><i class="fa fa-check"></i><b>6.1</b> Intro</a></li>
<li class="chapter" data-level="6.2" data-path="working-with-tables-in-r.html"><a href="working-with-tables-in-r.html#creating-basic-tables-table-and-xtabs"><i class="fa fa-check"></i><b>6.2</b> Creating Basic Tables: table() and xtabs()</a></li>
<li class="chapter" data-level="6.3" data-path="working-with-tables-in-r.html"><a href="working-with-tables-in-r.html#tabular-data-analysis"><i class="fa fa-check"></i><b>6.3</b> Tabular Data Analysis</a><ul>
<li class="chapter" data-level="6.3.1" data-path="working-with-tables-in-r.html"><a href="working-with-tables-in-r.html#tests-for-independence"><i class="fa fa-check"></i><b>6.3.1</b> Tests for Independence</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="statistical-fundamentals.html"><a href="statistical-fundamentals.html"><i class="fa fa-check"></i><b>7</b> Statistical Fundamentals</a><ul>
<li class="chapter" data-level="7.1" data-path="statistical-fundamentals.html"><a href="statistical-fundamentals.html#intro-4"><i class="fa fa-check"></i><b>7.1</b> Intro</a></li>
<li class="chapter" data-level="7.2" data-path="statistical-fundamentals.html"><a href="statistical-fundamentals.html#statistical-inference"><i class="fa fa-check"></i><b>7.2</b> Statistical Inference</a><ul>
<li class="chapter" data-level="7.2.1" data-path="statistical-fundamentals.html"><a href="statistical-fundamentals.html#parameter-estimation-mean-median-tutorial-quantiles"><i class="fa fa-check"></i><b>7.2.1</b> Parameter Estimation: Mean, Median, tutorial, Quantiles</a></li>
<li class="chapter" data-level="7.2.2" data-path="statistical-fundamentals.html"><a href="statistical-fundamentals.html#accounting-for-estimation-variance-and-hypothesis-testing"><i class="fa fa-check"></i><b>7.2.2</b> Accounting for estimation variance and hypothesis testing</a></li>
<li class="chapter" data-level="7.2.3" data-path="statistical-fundamentals.html"><a href="statistical-fundamentals.html#confidence-intervals"><i class="fa fa-check"></i><b>7.2.3</b> Confidence intervals</a></li>
<li class="chapter" data-level="7.2.4" data-path="statistical-fundamentals.html"><a href="statistical-fundamentals.html#hypothesis-testing"><i class="fa fa-check"></i><b>7.2.4</b> Hypothesis testing</a></li>
<li class="chapter" data-level="7.2.5" data-path="statistical-fundamentals.html"><a href="statistical-fundamentals.html#hypothesis-testing-with-means"><i class="fa fa-check"></i><b>7.2.5</b> Hypothesis Testing with Means</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html"><i class="fa fa-check"></i><b>8</b> Regression Analysis Methods</a><ul>
<li class="chapter" data-level="8.1" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#intro-5"><i class="fa fa-check"></i><b>8.1</b> Intro</a></li>
<li class="chapter" data-level="8.2" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#linear-regression"><i class="fa fa-check"></i><b>8.2</b> Linear Regression</a><ul>
<li class="chapter" data-level="8.2.1" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#motivation"><i class="fa fa-check"></i><b>8.2.1</b> Motivation</a></li>
<li class="chapter" data-level="8.2.2" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#methodology"><i class="fa fa-check"></i><b>8.2.2</b> Methodology</a></li>
<li class="chapter" data-level="8.2.3" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#overview"><i class="fa fa-check"></i><b>8.2.3</b> Overview</a></li>
<li class="chapter" data-level="8.2.4" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#example-1-continuous-predictors"><i class="fa fa-check"></i><b>8.2.4</b> Example 1: Continuous predictors</a></li>
<li class="chapter" data-level="8.2.5" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#example-2-categorical-predictors"><i class="fa fa-check"></i><b>8.2.5</b> Example 2: Categorical predictors</a></li>
<li class="chapter" data-level="8.2.6" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#diagnostics"><i class="fa fa-check"></i><b>8.2.6</b> Diagnostics</a></li>
<li class="chapter" data-level="8.2.7" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#anova-and-ancova"><i class="fa fa-check"></i><b>8.2.7</b> ANOVA and ANCOVA</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#logistic-regression"><i class="fa fa-check"></i><b>8.3</b> Logistic regression</a><ul>
<li class="chapter" data-level="8.3.1" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#methodology-1"><i class="fa fa-check"></i><b>8.3.1</b> Methodology</a></li>
<li class="chapter" data-level="8.3.2" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#example-1-continuous-covariates"><i class="fa fa-check"></i><b>8.3.2</b> Example 1: Continuous Covariates</a></li>
<li class="chapter" data-level="8.3.3" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#example-2-categorical-covariates"><i class="fa fa-check"></i><b>8.3.3</b> Example 2: Categorical Covariates</a></li>
<li class="chapter" data-level="8.3.4" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#prediction"><i class="fa fa-check"></i><b>8.3.4</b> Prediction</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#mixed-models"><i class="fa fa-check"></i><b>8.4</b> Mixed Models</a><ul>
<li class="chapter" data-level="8.4.1" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#motivation-1"><i class="fa fa-check"></i><b>8.4.1</b> Motivation</a></li>
<li class="chapter" data-level="8.4.2" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#example-mullen-composite-and-visit"><i class="fa fa-check"></i><b>8.4.2</b> Example: Mullen composite and Visit</a></li>
<li class="chapter" data-level="8.4.3" data-path="regression-analysis-methods.html"><a href="regression-analysis-methods.html#interpreting-results-time-dependent-covariates"><i class="fa fa-check"></i><b>8.4.3</b> Interpreting results: time dependent covariates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html"><i class="fa fa-check"></i><b>9</b> Documenting your results with R Markdown</a><ul>
<li class="chapter" data-level="9.1" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html#intro-6"><i class="fa fa-check"></i><b>9.1</b> Intro</a></li>
<li class="chapter" data-level="9.2" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html#starting-your-r-markdown"><i class="fa fa-check"></i><b>9.2</b> Starting Your R Markdown</a></li>
<li class="chapter" data-level="9.3" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html#understanding-the-r-markdown-editor"><i class="fa fa-check"></i><b>9.3</b> Understanding the R Markdown editor</a><ul>
<li class="chapter" data-level="9.3.1" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html#prelude"><i class="fa fa-check"></i><b>9.3.1</b> Prelude</a></li>
<li class="chapter" data-level="9.3.2" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html#chunk"><i class="fa fa-check"></i><b>9.3.2</b> Chunk</a></li>
<li class="chapter" data-level="9.3.3" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html#non-chunk"><i class="fa fa-check"></i><b>9.3.3</b> Non-chunk</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html#creating-your-document-from-the-r-markdown-file"><i class="fa fa-check"></i><b>9.4</b> Creating your document from the R Markdown file</a></li>
<li class="chapter" data-level="9.5" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html#creating-tables-with-r-markdown"><i class="fa fa-check"></i><b>9.5</b> Creating tables with R Markdown</a><ul>
<li class="chapter" data-level="9.5.1" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html#summary-statistics"><i class="fa fa-check"></i><b>9.5.1</b> Summary statistics</a></li>
<li class="chapter" data-level="9.5.2" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html#general-tables"><i class="fa fa-check"></i><b>9.5.2</b> General tables</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="documenting-your-results-with-r-markdown.html"><a href="documenting-your-results-with-r-markdown.html#practice-with-r-markdown"><i class="fa fa-check"></i><b>9.6</b> Practice with R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="loops-and-functional-programming.html"><a href="loops-and-functional-programming.html"><i class="fa fa-check"></i><b>10</b> Loops and Functional Programming</a><ul>
<li class="chapter" data-level="10.1" data-path="loops-and-functional-programming.html"><a href="loops-and-functional-programming.html#intro-7"><i class="fa fa-check"></i><b>10.1</b> Intro</a></li>
<li class="chapter" data-level="10.2" data-path="loops-and-functional-programming.html"><a href="loops-and-functional-programming.html#loops"><i class="fa fa-check"></i><b>10.2</b> Loops</a><ul>
<li class="chapter" data-level="10.2.1" data-path="loops-and-functional-programming.html"><a href="loops-and-functional-programming.html#example-1-running-many-regression-models"><i class="fa fa-check"></i><b>10.2.1</b> Example 1: Running many regression models</a></li>
<li class="chapter" data-level="10.2.2" data-path="loops-and-functional-programming.html"><a href="loops-and-functional-programming.html#example-2-the-apply-functions"><i class="fa fa-check"></i><b>10.2.2</b> Example 2: The Apply Functions</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="loops-and-functional-programming.html"><a href="loops-and-functional-programming.html#functional-programming"><i class="fa fa-check"></i><b>10.3</b> Functional Programming</a><ul>
<li class="chapter" data-level="10.3.1" data-path="loops-and-functional-programming.html"><a href="loops-and-functional-programming.html#example-regression-analysis-as-a-function-call"><i class="fa fa-check"></i><b>10.3.1</b> Example: Regression Analysis as a Function Call</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="loops-and-functional-programming.html"><a href="loops-and-functional-programming.html#simulation-studies"><i class="fa fa-check"></i><b>10.4</b> Simulation Studies</a><ul>
<li class="chapter" data-level="10.4.1" data-path="loops-and-functional-programming.html"><a href="loops-and-functional-programming.html#setting-the-seed-reproducibility-in-simulation-studies"><i class="fa fa-check"></i><b>10.4.1</b> Setting the Seed: Reproducibility in Simulation Studies</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis and Processing with R based on IBIS data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="using-dplyr" class="section level1">
<h1><span class="header-section-number">4</span> Using dplyr</h1>
<div id="intro-2" class="section level2">
<h2><span class="header-section-number">4.1</span> Intro</h2>
<p>The most intutive way to manipulate your data is using the functions inside the <strong>dplyr</strong> package, which is downloaded and installed into R (as all packages are, see Chapter 2 for more details). “Manipulating” your data refers to choosing a subset of the variables and/or observations in your dataset, as well as filtering (selecting observations based on their variable values), creating new variables, and more. Now that you understand the interface of R and R Studio and how to work with objects and functions, the rest of these tutorials will introduce techniques in R designed to address specific needs in standard data analyses. We start with data manipulation.</p>
</div>
<div id="dplyr-functions" class="section level2">
<h2><span class="header-section-number">4.2</span> dplyr Functions</h2>
<p>The package dplyr has many functions, each designed to do a specific task in data manipulation. The main ones are: <strong>select()</strong>, <strong>filter()</strong>, <strong>arrange()</strong>,<strong>mutate()</strong>, and <strong>summarize()</strong>. We will cover all of these, as well as other functions such as <strong>group_by()</strong>, <strong>spread()</strong>, <strong>gather()</strong>, <strong>separate()</strong>, and <strong>unite()</strong>. As with all packages, we first must load the package after it has been installed.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" title="1"><span class="co"># install.packages(&quot;dplyr&quot;)</span></a>
<a class="sourceLine" id="cb121-2" title="2"><span class="kw">library</span>(dplyr) <span class="co"># loads package</span></a></code></pre></div>
<div id="select-filter-and-arrange" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Select, filter, and arrange</h3>
<p>The functions select(), filter(), and arrange() handle the usual subsetting operations discussed in the previous chapter. We will go through each one in order.</p>
<p>The <strong>select()</strong> function is used to include or omit chosen variables (columns) from the dataset, as well as rearrange the order of the variables. The syntax is the following</p>
<p>select(dataset, variable_1, variable_2, …)</p>
<p>where the argument “dataset” is where you state the name of the object that represents the dataset of interest, and “variable_1”, “variable_2”,… are the arguments where you state the name of the variables/columns you want to include or remove (to remove the variable, begin the name with a -) in the order you would like them to apear in the dataset. There is no limit (I believe) to the number of variables that can be referenced. You can reference an ordered collection of variables (ordered meaning from left to right in the dataset) using variable_i:variable_j as an argument in the function, where “variable_i” is the name of the first variable and “variable_j” is the name of the last. This idea works with - as well. Lastly, unlike with subsetting in Base R, you can reference variables to include and remove (with a -) in a single select() function call.</p>
<p>The <strong>filter()</strong> function is used to reduce the dataset to a subset of observations based on a set of criteria for their variable values. The syntax is the following</p>
<p>filter(dataset, criteria_1, criteria_2, …)</p>
<p>where the arguments “criteria_1”, “criteria_2”,… are where you state the conditions needed for a observation to be included. Note that these are <strong>AND</strong> conditions, meaning an observation has to meet all provided criteria to be included and <strong>OR</strong> conditions where an observation has to meet at least one of the provided criteria. Let’s go into more detail on a AND condition and an OR condition, as well as logical statements in general.</p>
<p>In R, a <strong>logical statement</strong> is an operator that returns the value TRUE, FALSE, or NA (missing). They are conditions where if the condition is met, TRUE is returned, if not FALSE is returned, and if the variable in the condition is missing NA is returned. Conditional operators include &gt; (greater then), &lt; (less then), equal (==), &gt;= (greater then or equal to), &lt;= (less then or equal to), and ! (not). Consider the following simple examples.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" title="1">x &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb122-2" title="2">x<span class="op">==</span><span class="dv">5</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" title="1"><span class="op">!</span>(x<span class="op">==</span><span class="dv">5</span>) <span class="co"># not equal </span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" title="1">x<span class="op">!=</span><span class="dv">5</span> <span class="co"># also not equal</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" title="1">x<span class="op">&gt;</span><span class="dv">3</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" title="1">x<span class="op">&lt;</span><span class="dv">3</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" title="1"><span class="op">!</span>(x<span class="op">&lt;</span><span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" title="1">x<span class="op">&lt;=</span><span class="dv">5</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Logical statements can be combined and evaluated as a single statement using AND and OR statements. An AND statement means all individual statements must be TRUE to be evaluated as TRUE, otherwise is FALSE (or NA) while an OR statement means at least one statement must be TRUE to be evaluated as TRUE, and is FALSE only if all statements are FALSE. AND statements are created by separating individual logical statements with &amp; while OR statements are created by separating individual logical statements with |. Parentheses may also be needed so that R evaluates the individual statements in the correct order. Consider the following examples.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" title="1">x &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb136-2" title="2">y &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb136-3" title="3"></a>
<a class="sourceLine" id="cb136-4" title="4">x<span class="op">==</span><span class="dv">5</span><span class="op">|</span>y<span class="op">==</span><span class="dv">4</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" title="1">x<span class="op">==</span><span class="dv">5</span> <span class="op">&amp;</span><span class="st"> </span>y<span class="op">==</span><span class="dv">4</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" title="1">x<span class="op">==</span><span class="dv">5</span> <span class="op">&amp;</span><span class="st"> </span>y<span class="op">==</span><span class="dv">3</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" title="1">x<span class="op">&gt;</span><span class="dv">3</span> <span class="op">&amp;</span><span class="st"> </span>x<span class="op">&lt;</span><span class="dv">7</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" title="1"><span class="op">!</span>(x<span class="op">&gt;</span><span class="dv">3</span> <span class="op">&amp;</span><span class="st"> </span>x<span class="op">&lt;</span><span class="dv">7</span>) <span class="co"># negates TRUE expression =&gt; FALSE returned</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Now, let’s apply select() and filter() to some IBIS data. We will use the small AOSI dataset from before, and do the following:</p>
<ol style="list-style-type: decimal">
<li>Select specific variables to keep</li>
<li>Filter observations by AOSI total score and diagnosis group</li>
</ol>
<p>Remember that all changes are not saved nor do they overwrite the original dataset object in R, unless done by the user by either creating a new object with these changes or saving these new changes as an object of the same R object name as the dataset. Even if one changes the original R object, the Excel sheet is not changed (we will see later how to have the changes done in R be reflected in either the original Excel sheet or in a new Excel sheet).</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" title="1">excel_data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/AOSI_small.csv&quot;</span>, <span class="dt">na.strings=</span><span class="kw">c</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot; &quot;</span>)) <span class="co"># read-in data as data frame, save as named object</span></a>
<a class="sourceLine" id="cb146-2" title="2"></a>
<a class="sourceLine" id="cb146-3" title="3"><span class="co"># View whole dataset</span></a>
<a class="sourceLine" id="cb146-4" title="4">excel_data</a></code></pre></div>
<pre><code>##    Identifiers  GROUP Study_Site Gender V06.aosi.Candidate_Age
## 1            1 HR_ASD        PHI   Male                    7.1
## 2            2 HR_ASD        PHI   Male                    6.1
## 3            3 HR_ASD        PHI   Male                    6.6
## 4            4 HR_ASD        PHI   Male                     NA
## 5            5 HR_neg        PHI   Male                    6.8
## 6            6 HR_neg        PHI   Male                     NA
## 7            7 HR_ASD        PHI   Male                    6.2
## 8            8 HR_ASD        PHI   Male                    6.2
## 9            9 HR_neg        PHI   Male                     NA
## 10          10 HR_ASD        PHI   Male                     NA
##    V06.aosi.total_score_1_18 V12.aosi.Candidate_Age
## 1                          8                   12.5
## 2                         18                   12.4
## 3                          4                   12.9
## 4                         NA                   12.7
## 5                          6                     NA
## 6                         NA                   12.1
## 7                         16                   12.3
## 8                         10                   12.2
## 9                         NA                   12.4
## 10                        NA                   12.2
##    V12.aosi.total_score_1_18
## 1                          3
## 2                         10
## 3                          2
## 4                          3
## 5                         NA
## 6                          4
## 7                          4
## 8                         14
## 9                          1
## 10                         7</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" title="1"><span class="co"># Select only ID and Group and view data</span></a>
<a class="sourceLine" id="cb148-2" title="2"><span class="kw">select</span>(excel_data, Identifiers, GROUP)</a></code></pre></div>
<pre><code>##    Identifiers  GROUP
## 1            1 HR_ASD
## 2            2 HR_ASD
## 3            3 HR_ASD
## 4            4 HR_ASD
## 5            5 HR_neg
## 6            6 HR_neg
## 7            7 HR_ASD
## 8            8 HR_ASD
## 9            9 HR_neg
## 10          10 HR_ASD</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" title="1"><span class="co"># Remove gender and site from data</span></a>
<a class="sourceLine" id="cb150-2" title="2"><span class="kw">select</span>(excel_data, <span class="op">-</span>Gender, <span class="op">-</span>Study_Site)</a></code></pre></div>
<pre><code>##    Identifiers  GROUP V06.aosi.Candidate_Age V06.aosi.total_score_1_18
## 1            1 HR_ASD                    7.1                         8
## 2            2 HR_ASD                    6.1                        18
## 3            3 HR_ASD                    6.6                         4
## 4            4 HR_ASD                     NA                        NA
## 5            5 HR_neg                    6.8                         6
## 6            6 HR_neg                     NA                        NA
## 7            7 HR_ASD                    6.2                        16
## 8            8 HR_ASD                    6.2                        10
## 9            9 HR_neg                     NA                        NA
## 10          10 HR_ASD                     NA                        NA
##    V12.aosi.Candidate_Age V12.aosi.total_score_1_18
## 1                    12.5                         3
## 2                    12.4                        10
## 3                    12.9                         2
## 4                    12.7                         3
## 5                      NA                        NA
## 6                    12.1                         4
## 7                    12.3                         4
## 8                    12.2                        14
## 9                    12.4                         1
## 10                   12.2                         7</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" title="1"><span class="co"># Only include observations with ASD diagnosis</span></a>
<a class="sourceLine" id="cb152-2" title="2"><span class="kw">filter</span>(excel_data, GROUP<span class="op">==</span><span class="st">&quot;HR_ASD&quot;</span>)</a></code></pre></div>
<pre><code>##   Identifiers  GROUP Study_Site Gender V06.aosi.Candidate_Age
## 1           1 HR_ASD        PHI   Male                    7.1
## 2           2 HR_ASD        PHI   Male                    6.1
## 3           3 HR_ASD        PHI   Male                    6.6
## 4           4 HR_ASD        PHI   Male                     NA
## 5           7 HR_ASD        PHI   Male                    6.2
## 6           8 HR_ASD        PHI   Male                    6.2
## 7          10 HR_ASD        PHI   Male                     NA
##   V06.aosi.total_score_1_18 V12.aosi.Candidate_Age
## 1                         8                   12.5
## 2                        18                   12.4
## 3                         4                   12.9
## 4                        NA                   12.7
## 5                        16                   12.3
## 6                        10                   12.2
## 7                        NA                   12.2
##   V12.aosi.total_score_1_18
## 1                         3
## 2                        10
## 3                         2
## 4                         3
## 5                         4
## 6                        14
## 7                         7</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" title="1"><span class="co"># only include observations with ASD diagnosis and month 6 visit AOSI total score of at least 10 </span></a>
<a class="sourceLine" id="cb154-2" title="2"><span class="kw">filter</span>(excel_data, GROUP<span class="op">==</span><span class="st">&quot;HR_ASD&quot;</span> <span class="op">&amp;</span><span class="st"> </span>V06.aosi.total_score_<span class="dv">1</span>_<span class="dv">18</span><span class="op">&gt;=</span><span class="dv">10</span>) </a></code></pre></div>
<pre><code>##   Identifiers  GROUP Study_Site Gender V06.aosi.Candidate_Age
## 1           2 HR_ASD        PHI   Male                    6.1
## 2           7 HR_ASD        PHI   Male                    6.2
## 3           8 HR_ASD        PHI   Male                    6.2
##   V06.aosi.total_score_1_18 V12.aosi.Candidate_Age
## 1                        18                   12.4
## 2                        16                   12.3
## 3                        10                   12.2
##   V12.aosi.total_score_1_18
## 1                        10
## 2                         4
## 3                        14</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" title="1"><span class="co"># only include Female observations</span></a>
<a class="sourceLine" id="cb156-2" title="2"><span class="kw">filter</span>(excel_data, Gender<span class="op">==</span><span class="st">&quot;Female&quot;</span>) <span class="co"># Blank dataset returned, only have male subjects</span></a></code></pre></div>
<pre><code>## [1] Identifiers               GROUP                    
## [3] Study_Site                Gender                   
## [5] V06.aosi.Candidate_Age    V06.aosi.total_score_1_18
## [7] V12.aosi.Candidate_Age    V12.aosi.total_score_1_18
## &lt;0 rows&gt; (or 0-length row.names)</code></pre>
<p>Finally, the <strong>arrange()</strong> function is used to reorder the observations in the dataset based on specific variables. The syntax for the function is arrange(dataset, variable1, variable2, …) where variable1, variable2, … are the variables you wish to used for the reordering. Simply stating the variable name will order the dataset by increasing values of the variable. To use a decreasing order, use desc(variable) instead.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" title="1"><span class="kw">arrange</span>(excel_data, GROUP, V12.aosi.Candidate_Age) <span class="co"># increasing age</span></a></code></pre></div>
<pre><code>##    Identifiers  GROUP Study_Site Gender V06.aosi.Candidate_Age
## 1            8 HR_ASD        PHI   Male                    6.2
## 2           10 HR_ASD        PHI   Male                     NA
## 3            7 HR_ASD        PHI   Male                    6.2
## 4            2 HR_ASD        PHI   Male                    6.1
## 5            1 HR_ASD        PHI   Male                    7.1
## 6            4 HR_ASD        PHI   Male                     NA
## 7            3 HR_ASD        PHI   Male                    6.6
## 8            6 HR_neg        PHI   Male                     NA
## 9            9 HR_neg        PHI   Male                     NA
## 10           5 HR_neg        PHI   Male                    6.8
##    V06.aosi.total_score_1_18 V12.aosi.Candidate_Age
## 1                         10                   12.2
## 2                         NA                   12.2
## 3                         16                   12.3
## 4                         18                   12.4
## 5                          8                   12.5
## 6                         NA                   12.7
## 7                          4                   12.9
## 8                         NA                   12.1
## 9                         NA                   12.4
## 10                         6                     NA
##    V12.aosi.total_score_1_18
## 1                         14
## 2                          7
## 3                          4
## 4                         10
## 5                          3
## 6                          3
## 7                          2
## 8                          4
## 9                          1
## 10                        NA</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" title="1"><span class="kw">arrange</span>(excel_data, GROUP, <span class="kw">desc</span>(V12.aosi.Candidate_Age)) <span class="co"># decreasing age</span></a></code></pre></div>
<pre><code>##    Identifiers  GROUP Study_Site Gender V06.aosi.Candidate_Age
## 1            3 HR_ASD        PHI   Male                    6.6
## 2            4 HR_ASD        PHI   Male                     NA
## 3            1 HR_ASD        PHI   Male                    7.1
## 4            2 HR_ASD        PHI   Male                    6.1
## 5            7 HR_ASD        PHI   Male                    6.2
## 6            8 HR_ASD        PHI   Male                    6.2
## 7           10 HR_ASD        PHI   Male                     NA
## 8            9 HR_neg        PHI   Male                     NA
## 9            6 HR_neg        PHI   Male                     NA
## 10           5 HR_neg        PHI   Male                    6.8
##    V06.aosi.total_score_1_18 V12.aosi.Candidate_Age
## 1                          4                   12.9
## 2                         NA                   12.7
## 3                          8                   12.5
## 4                         18                   12.4
## 5                         16                   12.3
## 6                         10                   12.2
## 7                         NA                   12.2
## 8                         NA                   12.4
## 9                         NA                   12.1
## 10                         6                     NA
##    V12.aosi.total_score_1_18
## 1                          2
## 2                          3
## 3                          3
## 4                         10
## 5                          4
## 6                         14
## 7                          7
## 8                          1
## 9                          4
## 10                        NA</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" title="1"><span class="kw">arrange</span>(excel_data, <span class="kw">desc</span>(GROUP), V12.aosi.Candidate_Age) <span class="co"># &#39;decreasing GROUP&#39;, notice R uses alphabetical order when character variables are used</span></a></code></pre></div>
<pre><code>##    Identifiers  GROUP Study_Site Gender V06.aosi.Candidate_Age
## 1            6 HR_neg        PHI   Male                     NA
## 2            9 HR_neg        PHI   Male                     NA
## 3            5 HR_neg        PHI   Male                    6.8
## 4            8 HR_ASD        PHI   Male                    6.2
## 5           10 HR_ASD        PHI   Male                     NA
## 6            7 HR_ASD        PHI   Male                    6.2
## 7            2 HR_ASD        PHI   Male                    6.1
## 8            1 HR_ASD        PHI   Male                    7.1
## 9            4 HR_ASD        PHI   Male                     NA
## 10           3 HR_ASD        PHI   Male                    6.6
##    V06.aosi.total_score_1_18 V12.aosi.Candidate_Age
## 1                         NA                   12.1
## 2                         NA                   12.4
## 3                          6                     NA
## 4                         10                   12.2
## 5                         NA                   12.2
## 6                         16                   12.3
## 7                         18                   12.4
## 8                          8                   12.5
## 9                         NA                   12.7
## 10                         4                   12.9
##    V12.aosi.total_score_1_18
## 1                          4
## 2                          1
## 3                         NA
## 4                         14
## 5                          7
## 6                          4
## 7                         10
## 8                          3
## 9                          3
## 10                         2</code></pre>
</div>
<div id="mutate-and-summarize" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Mutate and summarize</h3>
<p>The functions <strong>mutate()</strong> and <strong>summarize()</strong> are used to create new variables to add to the dataset. First, we cover mutate(). The syntax for this function is when used with the pipe is mutate(dataset, variable1, variable2, …) where variable1, variable2, … are the definitions of the variables you want to add. They will be calculated for each observation in the dataset. We consider an IBIS dataset of high risk children (HR) with Vineland, Mullen, and AOSI information.</p>
<p>Suppose we wanted create the following variables 1) variable containing each child’s mean Mullen composite standard score across the 4 visits in the dataset and 2) variable indicating if the site of the visit is on the East Coast, Midwest, or West Coast of the United States. We can easily do this using mutate(), as shown below.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" title="1"><span class="co"># Create data set of only HR children</span></a>
<a class="sourceLine" id="cb164-2" title="2">HR_data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/Cross-sec_full.csv&quot;</span>, <span class="dt">na.strings=</span><span class="kw">c</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot; &quot;</span>)) </a>
<a class="sourceLine" id="cb164-3" title="3">HR_data &lt;-<span class="st"> </span><span class="kw">filter</span>(HR_data, V24.demographics.Risk<span class="op">==</span><span class="st">&quot;HR&quot;</span>)</a>
<a class="sourceLine" id="cb164-4" title="4"></a>
<a class="sourceLine" id="cb164-5" title="5"><span class="co"># Create variables using mutate()</span></a>
<a class="sourceLine" id="cb164-6" title="6">HR_data &lt;-<span class="st"> </span><span class="kw">mutate</span>(HR_data, <span class="dt">Mullen_Mean=</span>(<span class="st">`</span><span class="dt">V06.mullen.composite_standard_score</span><span class="st">`</span><span class="op">+</span><span class="st">`</span><span class="dt">V12.mullen.composite_standard_score</span><span class="st">`</span><span class="op">+</span></a>
<a class="sourceLine" id="cb164-7" title="7"><span class="st">                                       `</span><span class="dt">V24.mullen.composite_standard_score</span><span class="st">`</span><span class="op">+</span><span class="st">`</span><span class="dt">V36.mullen.composite_standard_score</span><span class="st">`</span>)<span class="op">/</span><span class="dv">4</span>,</a>
<a class="sourceLine" id="cb164-8" title="8">         <span class="dt">Site_Location=</span><span class="kw">factor</span>(<span class="kw">ifelse</span>(Study_Site<span class="op">==</span><span class="st">&quot;PHI&quot;</span><span class="op">|</span>Study_Site<span class="op">==</span><span class="st">&quot;UNC&quot;</span>,<span class="st">&quot;East_Coast&quot;</span>,</a>
<a class="sourceLine" id="cb164-9" title="9">                                      <span class="kw">ifelse</span>(Study_Site<span class="op">==</span><span class="st">&quot;STL&quot;</span>,<span class="st">&quot;Midwest&quot;</span>,<span class="st">&quot;West_Coast&quot;</span>))))</a>
<a class="sourceLine" id="cb164-10" title="10"></a>
<a class="sourceLine" id="cb164-11" title="11"><span class="kw">ftable</span>(HR_data<span class="op">$</span>Study_Site, HR_data<span class="op">$</span>Site_Location)</a></code></pre></div>
<pre><code>##      East_Coast Midwest West_Coast
##                                   
## PHI         108       0          0
## SEA           0       0        101
## STL           0     110          0
## UNC          90       0          0</code></pre>
<p>From the above example, you will notice the use of the function <strong>ifelse()</strong>. Using this function, you can create a series of if…else commands so that R execute pieces of code based on specified criteria. The syntax for ifelse() is ifelse(condition, action, else) where <strong>condition</strong> is some logical statement to test (i.e., this condition needs to return TRUE or FALSE), <strong>action</strong> is the command R will execute if the condition is TRUE, and <strong>else</strong> is the command R will execute if the condition if FALSE. As you can see in the above example, you ca create a series of if…else commands by chaining ifelse() calls by setting the else argument to another call to ifelse(). The ifelse chain used in the above example is interpreted as follows.</p>
<ol style="list-style-type: decimal">
<li><p>If site is UNC or site is PHI, set variable Site_Location’s value to East_Coast</p></li>
<li><p>Else, if site is STL, set variable Site_Location’s value to Midwest</p></li>
<li><p>Else, if 1) and 2) are not true, set variable Site_Location’s value to West_Coast (since site then must be SEA)</p></li>
</ol>
<p>Make sure to keep track of missing values; in our example, there are no missing values for site so this was not a concern. If there were missing values for site, the variable Site_Location would be set to West_Coast and not NA as desired.</p>
<p>The function summarize() is used to reduce a dataset to a set of chosen summary statistics such as the mean, sample size, standard deviation, etc. The syntax is summarize(dataset, variable1, variable2, …) where variable1, variable2, … are the definitions of the summary statistics you wish to calculate. For example, suppose in the AOSI dataset, we want to create a dataset containing the mean values of total score at month 6 and at month 12. This can be done using summarise().</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" title="1">aosi_data &lt;-<span class="kw">read.csv</span>(<span class="st">&quot;Data/cross-sec_aosi.csv&quot;</span>, <span class="dt">na.strings=</span><span class="kw">c</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot; &quot;</span>))</a>
<a class="sourceLine" id="cb166-2" title="2"><span class="kw">summarise</span>(aosi_data, <span class="dt">sample_size=</span><span class="kw">n</span>(), <span class="dt">mean_aosi_ts_V6=</span><span class="kw">mean</span>(V06.aosi.total_score_<span class="dv">1</span>_<span class="dv">18</span>), <span class="dt">mean_aosi_ts_V12=</span><span class="kw">mean</span>(V12.aosi.total_score_<span class="dv">1</span>_<span class="dv">18</span>))</a></code></pre></div>
<pre><code>##   sample_size mean_aosi_ts_V6 mean_aosi_ts_V12
## 1         587              NA               NA</code></pre>
<p>This function becomes much more useful when combined with the function <strong>group_by()</strong>. The calling group_by() on the dataset before using summarise() will have R incorporate the created groups in calculations; after calling group_by(), while the data may look to the same to us, R has marked observations as being grouped together in the background. Let’s repeat the above example, but first group by gender and diagnosis.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" title="1">aosi_data_grouped &lt;-<span class="st"> </span><span class="kw">group_by</span>(aosi_data, Gender, GROUP) <span class="co"># Notice in the environment window, this object is marked as type grouped_...</span></a>
<a class="sourceLine" id="cb168-2" title="2"><span class="kw">summarise</span>(aosi_data_grouped, <span class="dt">sample_size=</span><span class="kw">n</span>(), <span class="dt">mean_aosi_ts_V6=</span><span class="kw">mean</span>(V06.aosi.total_score_<span class="dv">1</span>_<span class="dv">18</span>), <span class="dt">mean_aosi_ts_V12=</span><span class="kw">mean</span>(V12.aosi.total_score_<span class="dv">1</span>_<span class="dv">18</span>))</a></code></pre></div>
<pre><code>## # A tibble: 8 x 5
## # Groups:   Gender [2]
##   Gender GROUP  sample_size mean_aosi_ts_V6 mean_aosi_ts_V12
##   &lt;fct&gt;  &lt;fct&gt;        &lt;int&gt;           &lt;dbl&gt;            &lt;dbl&gt;
## 1 Female HR_ASD          20              NA               NA
## 2 Female HR_neg         145              NA               NA
## 3 Female LR_ASD           1               6                5
## 4 Female LR_neg          69              NA               NA
## 5 Male   HR_ASD          75              NA               NA
## 6 Male   HR_neg         173              NA               NA
## 7 Male   LR_ASD           2               8                3
## 8 Male   LR_neg         102              NA               NA</code></pre>
<p>We can see the summary statistics are calculated for each specified group. There are many summary statistics that can be calculated using the summarise() function; note that due to missing values, some of the means are NA (this can be changed by adding <strong>na.omit=TRUE</strong> as arguments to the calls to mean(). For a list of some of these statistics and how to implement them, use ?summarise.</p>
</div>
<div id="spread-gather-separate-and-unite" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Spread, Gather, Separate and Unite</h3>
<p>The dplyr package also has functions used to transform the dimensions of your data, for example going from wide to long. Recall the full dataset has data on children for multiple time points; thus, it will be essential for certain analyses to have the data in long form or in wide form. The functions <strong>spread()</strong>, <strong>gather()</strong>, <strong>separate()</strong>, and <strong>unite()</strong> can be used to do these transformations. We show all four functions through an example. For more explanation of these functions, please see <a href="https://r4ds.had.co.nz/tidy-data.html#spreading-and-gathering"></a> and <a href="https://r4ds.had.co.nz/tidy-data.html#separating-and-uniting"></a> from Hadley Wickham’s excellent book R for Data Science.</p>
<p>Consider the AOSI_small.csv data set. Recall, we previously loaded this dataset into R and saved it as excel_data. This dataset has the child’s age and AOSI total score at 6 months and 12 months and is “wide” form (1 row per child). Let us transform this to “long” form (multiple rows per subject).</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" title="1">excel_data</a></code></pre></div>
<pre><code>##    Identifiers  GROUP Study_Site Gender V06.aosi.Candidate_Age
## 1            1 HR_ASD        PHI   Male                    7.1
## 2            2 HR_ASD        PHI   Male                    6.1
## 3            3 HR_ASD        PHI   Male                    6.6
## 4            4 HR_ASD        PHI   Male                     NA
## 5            5 HR_neg        PHI   Male                    6.8
## 6            6 HR_neg        PHI   Male                     NA
## 7            7 HR_ASD        PHI   Male                    6.2
## 8            8 HR_ASD        PHI   Male                    6.2
## 9            9 HR_neg        PHI   Male                     NA
## 10          10 HR_ASD        PHI   Male                     NA
##    V06.aosi.total_score_1_18 V12.aosi.Candidate_Age
## 1                          8                   12.5
## 2                         18                   12.4
## 3                          4                   12.9
## 4                         NA                   12.7
## 5                          6                     NA
## 6                         NA                   12.1
## 7                         16                   12.3
## 8                         10                   12.2
## 9                         NA                   12.4
## 10                        NA                   12.2
##    V12.aosi.total_score_1_18
## 1                          3
## 2                         10
## 3                          2
## 4                          3
## 5                         NA
## 6                          4
## 7                          4
## 8                         14
## 9                          1
## 10                         7</code></pre>
<p>First, we extract the variable names which represent the repeated measures (age and AOSI total score) for the children.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" title="1">vars_to_convert &lt;-<span class="st"> </span><span class="kw">names</span>(excel_data)[<span class="dv">5</span><span class="op">:</span><span class="dv">8</span>]</a>
<a class="sourceLine" id="cb172-2" title="2">vars_to_convert</a></code></pre></div>
<pre><code>## [1] &quot;V06.aosi.Candidate_Age&quot;    &quot;V06.aosi.total_score_1_18&quot;
## [3] &quot;V12.aosi.Candidate_Age&quot;    &quot;V12.aosi.total_score_1_18&quot;</code></pre>
<p>Then, we force each of these variables to be it’s own row, creating two new variables; 1) “variable” which contains the variable’s name and 2) “var_value” with the value of the variable. This is done using <strong>gather()</strong>. With gather(), first you the generate new variable name which holds the old variable, second you specify the new variable name which holds of the value of the old variable, and thirdly you specify the names of the old variables. Notice the use of <strong>%&gt;%</strong> in the following code. This symbol is called the <strong>pipe</strong> and is used to connect various lines together, instead of writing and saving each line as a separate object to then be overwritten. We discuss the pipe in detail in a later part of this chapter; for now, all you need to understand is that it connects each of the proceeding lines together into a single command.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" title="1"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb174-2" title="2">excel_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb174-3" title="3"><span class="st">  </span><span class="kw">gather</span>(variable, var_value, vars_to_convert)</a></code></pre></div>
<pre><code>##    Identifiers  GROUP Study_Site Gender                  variable
## 1            1 HR_ASD        PHI   Male    V06.aosi.Candidate_Age
## 2            2 HR_ASD        PHI   Male    V06.aosi.Candidate_Age
## 3            3 HR_ASD        PHI   Male    V06.aosi.Candidate_Age
## 4            4 HR_ASD        PHI   Male    V06.aosi.Candidate_Age
## 5            5 HR_neg        PHI   Male    V06.aosi.Candidate_Age
## 6            6 HR_neg        PHI   Male    V06.aosi.Candidate_Age
## 7            7 HR_ASD        PHI   Male    V06.aosi.Candidate_Age
## 8            8 HR_ASD        PHI   Male    V06.aosi.Candidate_Age
## 9            9 HR_neg        PHI   Male    V06.aosi.Candidate_Age
## 10          10 HR_ASD        PHI   Male    V06.aosi.Candidate_Age
## 11           1 HR_ASD        PHI   Male V06.aosi.total_score_1_18
## 12           2 HR_ASD        PHI   Male V06.aosi.total_score_1_18
## 13           3 HR_ASD        PHI   Male V06.aosi.total_score_1_18
## 14           4 HR_ASD        PHI   Male V06.aosi.total_score_1_18
## 15           5 HR_neg        PHI   Male V06.aosi.total_score_1_18
## 16           6 HR_neg        PHI   Male V06.aosi.total_score_1_18
## 17           7 HR_ASD        PHI   Male V06.aosi.total_score_1_18
## 18           8 HR_ASD        PHI   Male V06.aosi.total_score_1_18
## 19           9 HR_neg        PHI   Male V06.aosi.total_score_1_18
## 20          10 HR_ASD        PHI   Male V06.aosi.total_score_1_18
## 21           1 HR_ASD        PHI   Male    V12.aosi.Candidate_Age
## 22           2 HR_ASD        PHI   Male    V12.aosi.Candidate_Age
## 23           3 HR_ASD        PHI   Male    V12.aosi.Candidate_Age
## 24           4 HR_ASD        PHI   Male    V12.aosi.Candidate_Age
## 25           5 HR_neg        PHI   Male    V12.aosi.Candidate_Age
## 26           6 HR_neg        PHI   Male    V12.aosi.Candidate_Age
## 27           7 HR_ASD        PHI   Male    V12.aosi.Candidate_Age
## 28           8 HR_ASD        PHI   Male    V12.aosi.Candidate_Age
## 29           9 HR_neg        PHI   Male    V12.aosi.Candidate_Age
## 30          10 HR_ASD        PHI   Male    V12.aosi.Candidate_Age
## 31           1 HR_ASD        PHI   Male V12.aosi.total_score_1_18
## 32           2 HR_ASD        PHI   Male V12.aosi.total_score_1_18
## 33           3 HR_ASD        PHI   Male V12.aosi.total_score_1_18
## 34           4 HR_ASD        PHI   Male V12.aosi.total_score_1_18
## 35           5 HR_neg        PHI   Male V12.aosi.total_score_1_18
## 36           6 HR_neg        PHI   Male V12.aosi.total_score_1_18
## 37           7 HR_ASD        PHI   Male V12.aosi.total_score_1_18
## 38           8 HR_ASD        PHI   Male V12.aosi.total_score_1_18
## 39           9 HR_neg        PHI   Male V12.aosi.total_score_1_18
## 40          10 HR_ASD        PHI   Male V12.aosi.total_score_1_18
##    var_value
## 1        7.1
## 2        6.1
## 3        6.6
## 4         NA
## 5        6.8
## 6         NA
## 7        6.2
## 8        6.2
## 9         NA
## 10        NA
## 11       8.0
## 12      18.0
## 13       4.0
## 14        NA
## 15       6.0
## 16        NA
## 17      16.0
## 18      10.0
## 19        NA
## 20        NA
## 21      12.5
## 22      12.4
## 23      12.9
## 24      12.7
## 25        NA
## 26      12.1
## 27      12.3
## 28      12.2
## 29      12.4
## 30      12.2
## 31       3.0
## 32      10.0
## 33       2.0
## 34       3.0
## 35        NA
## 36       4.0
## 37       4.0
## 38      14.0
## 39       1.0
## 40       7.0</code></pre>
<p>Next, we split the “variable” into two new variables; 1) contains the visit and 2) contains the variable at that visit. This is done using <strong>separate()</strong>. With separate(), first you specify the variable which you are separating, second you specify the names of the new variables created from the separating, and third you specify where in the old variable you want to separate (here we spit after the 3rd character, hence sep=3).</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" title="1"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb176-2" title="2">excel_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb176-3" title="3"><span class="st">  </span><span class="kw">gather</span>(variable, var_value, vars_to_convert) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb176-4" title="4"><span class="st">  </span><span class="kw">separate</span>(variable,<span class="kw">c</span>(<span class="st">&quot;Visit&quot;</span>,<span class="st">&quot;Variable&quot;</span>),<span class="dt">sep=</span><span class="dv">3</span>)</a></code></pre></div>
<pre><code>##    Identifiers  GROUP Study_Site Gender Visit               Variable
## 1            1 HR_ASD        PHI   Male   V06    .aosi.Candidate_Age
## 2            2 HR_ASD        PHI   Male   V06    .aosi.Candidate_Age
## 3            3 HR_ASD        PHI   Male   V06    .aosi.Candidate_Age
## 4            4 HR_ASD        PHI   Male   V06    .aosi.Candidate_Age
## 5            5 HR_neg        PHI   Male   V06    .aosi.Candidate_Age
## 6            6 HR_neg        PHI   Male   V06    .aosi.Candidate_Age
## 7            7 HR_ASD        PHI   Male   V06    .aosi.Candidate_Age
## 8            8 HR_ASD        PHI   Male   V06    .aosi.Candidate_Age
## 9            9 HR_neg        PHI   Male   V06    .aosi.Candidate_Age
## 10          10 HR_ASD        PHI   Male   V06    .aosi.Candidate_Age
## 11           1 HR_ASD        PHI   Male   V06 .aosi.total_score_1_18
## 12           2 HR_ASD        PHI   Male   V06 .aosi.total_score_1_18
## 13           3 HR_ASD        PHI   Male   V06 .aosi.total_score_1_18
## 14           4 HR_ASD        PHI   Male   V06 .aosi.total_score_1_18
## 15           5 HR_neg        PHI   Male   V06 .aosi.total_score_1_18
## 16           6 HR_neg        PHI   Male   V06 .aosi.total_score_1_18
## 17           7 HR_ASD        PHI   Male   V06 .aosi.total_score_1_18
## 18           8 HR_ASD        PHI   Male   V06 .aosi.total_score_1_18
## 19           9 HR_neg        PHI   Male   V06 .aosi.total_score_1_18
## 20          10 HR_ASD        PHI   Male   V06 .aosi.total_score_1_18
## 21           1 HR_ASD        PHI   Male   V12    .aosi.Candidate_Age
## 22           2 HR_ASD        PHI   Male   V12    .aosi.Candidate_Age
## 23           3 HR_ASD        PHI   Male   V12    .aosi.Candidate_Age
## 24           4 HR_ASD        PHI   Male   V12    .aosi.Candidate_Age
## 25           5 HR_neg        PHI   Male   V12    .aosi.Candidate_Age
## 26           6 HR_neg        PHI   Male   V12    .aosi.Candidate_Age
## 27           7 HR_ASD        PHI   Male   V12    .aosi.Candidate_Age
## 28           8 HR_ASD        PHI   Male   V12    .aosi.Candidate_Age
## 29           9 HR_neg        PHI   Male   V12    .aosi.Candidate_Age
## 30          10 HR_ASD        PHI   Male   V12    .aosi.Candidate_Age
## 31           1 HR_ASD        PHI   Male   V12 .aosi.total_score_1_18
## 32           2 HR_ASD        PHI   Male   V12 .aosi.total_score_1_18
## 33           3 HR_ASD        PHI   Male   V12 .aosi.total_score_1_18
## 34           4 HR_ASD        PHI   Male   V12 .aosi.total_score_1_18
## 35           5 HR_neg        PHI   Male   V12 .aosi.total_score_1_18
## 36           6 HR_neg        PHI   Male   V12 .aosi.total_score_1_18
## 37           7 HR_ASD        PHI   Male   V12 .aosi.total_score_1_18
## 38           8 HR_ASD        PHI   Male   V12 .aosi.total_score_1_18
## 39           9 HR_neg        PHI   Male   V12 .aosi.total_score_1_18
## 40          10 HR_ASD        PHI   Male   V12 .aosi.total_score_1_18
##    var_value
## 1        7.1
## 2        6.1
## 3        6.6
## 4         NA
## 5        6.8
## 6         NA
## 7        6.2
## 8        6.2
## 9         NA
## 10        NA
## 11       8.0
## 12      18.0
## 13       4.0
## 14        NA
## 15       6.0
## 16        NA
## 17      16.0
## 18      10.0
## 19        NA
## 20        NA
## 21      12.5
## 22      12.4
## 23      12.9
## 24      12.7
## 25        NA
## 26      12.1
## 27      12.3
## 28      12.2
## 29      12.4
## 30      12.2
## 31       3.0
## 32      10.0
## 33       2.0
## 34       3.0
## 35        NA
## 36       4.0
## 37       4.0
## 38      14.0
## 39       1.0
## 40       7.0</code></pre>
<p>Finally, we force the non-visit index variable to be separate columns instead of a single column of variable names. This is done using <strong>spread()</strong>. With spread(), first we specify the list of variables (key=) and second we specify the list of values of these variables (value=)</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" title="1"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb178-2" title="2">excel_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb178-3" title="3"><span class="st">  </span><span class="kw">gather</span>(variable, var_value, vars_to_convert) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb178-4" title="4"><span class="st">  </span><span class="kw">separate</span>(variable,<span class="kw">c</span>(<span class="st">&quot;Visit&quot;</span>,<span class="st">&quot;Variable&quot;</span>),<span class="dt">sep=</span><span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb178-5" title="5"><span class="st">  </span><span class="kw">spread</span>(<span class="dt">key=</span>Variable, <span class="dt">value=</span>var_value)</a></code></pre></div>
<pre><code>##    Identifiers  GROUP Study_Site Gender Visit .aosi.Candidate_Age
## 1            1 HR_ASD        PHI   Male   V06                 7.1
## 2            1 HR_ASD        PHI   Male   V12                12.5
## 3            2 HR_ASD        PHI   Male   V06                 6.1
## 4            2 HR_ASD        PHI   Male   V12                12.4
## 5            3 HR_ASD        PHI   Male   V06                 6.6
## 6            3 HR_ASD        PHI   Male   V12                12.9
## 7            4 HR_ASD        PHI   Male   V06                  NA
## 8            4 HR_ASD        PHI   Male   V12                12.7
## 9            5 HR_neg        PHI   Male   V06                 6.8
## 10           5 HR_neg        PHI   Male   V12                  NA
## 11           6 HR_neg        PHI   Male   V06                  NA
## 12           6 HR_neg        PHI   Male   V12                12.1
## 13           7 HR_ASD        PHI   Male   V06                 6.2
## 14           7 HR_ASD        PHI   Male   V12                12.3
## 15           8 HR_ASD        PHI   Male   V06                 6.2
## 16           8 HR_ASD        PHI   Male   V12                12.2
## 17           9 HR_neg        PHI   Male   V06                  NA
## 18           9 HR_neg        PHI   Male   V12                12.4
## 19          10 HR_ASD        PHI   Male   V06                  NA
## 20          10 HR_ASD        PHI   Male   V12                12.2
##    .aosi.total_score_1_18
## 1                       8
## 2                       3
## 3                      18
## 4                      10
## 5                       4
## 6                       2
## 7                      NA
## 8                       3
## 9                       6
## 10                     NA
## 11                     NA
## 12                      4
## 13                     16
## 14                      4
## 15                     10
## 16                     14
## 17                     NA
## 18                      1
## 19                     NA
## 20                      7</code></pre>
<p>Finally, we clean up the formatting of the variables using the functions discussed previously (rename(), mutate(), etc.). We save this new transformed dataset as long_data.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" title="1"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb180-2" title="2">long_data &lt;-<span class="st"> </span>excel_data <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb180-3" title="3"><span class="st">  </span><span class="kw">gather</span>(variable, var_value, vars_to_convert) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb180-4" title="4"><span class="st">  </span><span class="kw">separate</span>(variable,<span class="kw">c</span>(<span class="st">&quot;Visit&quot;</span>,<span class="st">&quot;Variable&quot;</span>),<span class="dt">sep=</span><span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb180-5" title="5"><span class="st">  </span><span class="kw">spread</span>(<span class="dt">key=</span>Variable, <span class="dt">value=</span>var_value) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb180-6" title="6"><span class="st">  </span>plyr<span class="op">::</span><span class="kw">rename</span>(<span class="kw">c</span>(<span class="st">&quot;.aosi.Candidate_Age&quot;</span>=<span class="st">&quot;AOSI_Age&quot;</span>,</a>
<a class="sourceLine" id="cb180-7" title="7">                 <span class="st">&quot;.aosi.total_score_1_18&quot;</span>=<span class="st">&quot;AOSI_Total_Score&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb180-8" title="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ASD_Diag =</span> <span class="kw">factor</span>(<span class="kw">ifelse</span>(<span class="kw">grepl</span>(<span class="st">&quot;ASD&quot;</span>, GROUP), <span class="st">&quot;ASD_Neg&quot;</span>, <span class="st">&quot;ASD_Pos&quot;</span>)),</a>
<a class="sourceLine" id="cb180-9" title="9">         <span class="dt">Visit=</span><span class="kw">factor</span>(Visit)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb180-10" title="10"><span class="st">  </span><span class="kw">arrange</span>(Identifiers, Visit)</a>
<a class="sourceLine" id="cb180-11" title="11"></a>
<a class="sourceLine" id="cb180-12" title="12">long_data</a></code></pre></div>
<pre><code>##    Identifiers  GROUP Study_Site Gender Visit AOSI_Age AOSI_Total_Score
## 1            1 HR_ASD        PHI   Male   V06      7.1                8
## 2            1 HR_ASD        PHI   Male   V12     12.5                3
## 3            2 HR_ASD        PHI   Male   V06      6.1               18
## 4            2 HR_ASD        PHI   Male   V12     12.4               10
## 5            3 HR_ASD        PHI   Male   V06      6.6                4
## 6            3 HR_ASD        PHI   Male   V12     12.9                2
## 7            4 HR_ASD        PHI   Male   V06       NA               NA
## 8            4 HR_ASD        PHI   Male   V12     12.7                3
## 9            5 HR_neg        PHI   Male   V06      6.8                6
## 10           5 HR_neg        PHI   Male   V12       NA               NA
## 11           6 HR_neg        PHI   Male   V06       NA               NA
## 12           6 HR_neg        PHI   Male   V12     12.1                4
## 13           7 HR_ASD        PHI   Male   V06      6.2               16
## 14           7 HR_ASD        PHI   Male   V12     12.3                4
## 15           8 HR_ASD        PHI   Male   V06      6.2               10
## 16           8 HR_ASD        PHI   Male   V12     12.2               14
## 17           9 HR_neg        PHI   Male   V06       NA               NA
## 18           9 HR_neg        PHI   Male   V12     12.4                1
## 19          10 HR_ASD        PHI   Male   V06       NA               NA
## 20          10 HR_ASD        PHI   Male   V12     12.2                7
##    ASD_Diag
## 1   ASD_Neg
## 2   ASD_Neg
## 3   ASD_Neg
## 4   ASD_Neg
## 5   ASD_Neg
## 6   ASD_Neg
## 7   ASD_Neg
## 8   ASD_Neg
## 9   ASD_Pos
## 10  ASD_Pos
## 11  ASD_Pos
## 12  ASD_Pos
## 13  ASD_Neg
## 14  ASD_Neg
## 15  ASD_Neg
## 16  ASD_Neg
## 17  ASD_Pos
## 18  ASD_Pos
## 19  ASD_Neg
## 20  ASD_Neg</code></pre>
</div>
<div id="renaming-variables" class="section level3">
<h3><span class="header-section-number">4.2.4</span> Renaming variables</h3>
<p>The final function in dplyr we discuss is <strong>rename()</strong>, used for renaming variables. The syntax for this function is rename(data, variable1_new_name=variable1_old_name, variable2_new_name=variable2_old_name, …). See the example below where the ID variable and diagnosis group variable are renamed.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" title="1">rename_ex &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/cross-sec_aosi.csv&quot;</span>, <span class="dt">na.strings=</span><span class="kw">c</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot; &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb182-2" title="2"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">ID=</span>Identifiers, <span class="dt">Diagnosis_group=</span>GROUP)</a>
<a class="sourceLine" id="cb182-3" title="3"></a>
<a class="sourceLine" id="cb182-4" title="4">rename_ex[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,]</a></code></pre></div>
<pre><code>##    ID Diagnosis_group Study_Site Gender V06.aosi.Candidate_Age
## 1   1          HR_ASD        PHI   Male                    7.1
## 2   2          HR_ASD        PHI   Male                    6.1
## 3   3          HR_ASD        PHI   Male                    6.6
## 4   4          HR_ASD        PHI   Male                     NA
## 5   5          HR_neg        PHI   Male                    6.8
## 6   6          HR_neg        PHI   Male                     NA
## 7   7          HR_ASD        PHI   Male                    6.2
## 8   8          HR_ASD        PHI   Male                    6.2
## 9   9          HR_neg        PHI   Male                     NA
## 10 10          HR_ASD        PHI   Male                     NA
##    V06.aosi.total_score_1_18 V12.aosi.Candidate_Age
## 1                          8                   12.5
## 2                         18                   12.4
## 3                          4                   12.9
## 4                         NA                   12.7
## 5                          6                     NA
## 6                         NA                   12.1
## 7                         16                   12.3
## 8                         10                   12.2
## 9                         NA                   12.4
## 10                        NA                   12.2
##    V12.aosi.total_score_1_18
## 1                          3
## 2                         10
## 3                          2
## 4                          3
## 5                         NA
## 6                          4
## 7                          4
## 8                         14
## 9                          1
## 10                         7</code></pre>
</div>
<div id="using-the-pipe" class="section level3">
<h3><span class="header-section-number">4.2.5</span> Using the pipe</h3>
<p>All of these functions in dplyr can be used in combination efficiently by using the <strong>pipe operator</strong>. The idea of the pipe is very simple; instead of writing each new data transformation as a new line and saving each previous transformation as an object to then overwrite, the pipe allows you to connect all of the steps together in a single line.</p>
<p>The pipe operator is denoted by <strong>%&gt;%</strong>. Many functions can be connected using the pipe, including all of the dplyr package functions described above along with most of the other functions you will use in R when reading-in and manipulating data.</p>
<p>For example, let’s revisit calculating the mean AOSI scores by gender and site. Previously, this required multiple lines of R code, including creating a separate form of the dataset as an R object in which the dataset was grouped by gender and site. Let’s do this example using the pipe operator, seen below. You can see it is essentially the same code as before, with the first arguments of each function removed and each line connected by the operator %&gt;%. The first argument is removed because by connecting the function calls with %&gt;%, the result of the previous function is carried forward into the first argument of the next function by %&gt;%. Thus, any function in which the first argument is an R dataset can bse used with the pipe operator. Notice also that no intermediate objects need to be saved.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" title="1">aosi_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb184-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(Gender, GROUP) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb184-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">sample_size=</span><span class="kw">n</span>(), <span class="dt">mean_aosi_ts_V6=</span><span class="kw">mean</span>(V06.aosi.total_score_<span class="dv">1</span>_<span class="dv">18</span>), <span class="dt">mean_aosi_ts_V12=</span><span class="kw">mean</span>(V12.aosi.total_score_<span class="dv">1</span>_<span class="dv">18</span>))</a></code></pre></div>
<pre><code>## # A tibble: 8 x 5
## # Groups:   Gender [2]
##   Gender GROUP  sample_size mean_aosi_ts_V6 mean_aosi_ts_V12
##   &lt;fct&gt;  &lt;fct&gt;        &lt;int&gt;           &lt;dbl&gt;            &lt;dbl&gt;
## 1 Female HR_ASD          20              NA               NA
## 2 Female HR_neg         145              NA               NA
## 3 Female LR_ASD           1               6                5
## 4 Female LR_neg          69              NA               NA
## 5 Male   HR_ASD          75              NA               NA
## 6 Male   HR_neg         173              NA               NA
## 7 Male   LR_ASD           2               8                3
## 8 Male   LR_neg         102              NA               NA</code></pre>
<p>As a result, using the pipe operator makes your code more efficient (memory-wise in your computer and in the amount of code used) and readable. In fact, you can even avoid saving the dataset aosi_data all together and writing your code in the folowing fashion.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" title="1"><span class="kw">read.csv</span>(<span class="st">&quot;Data/cross-sec_aosi.csv&quot;</span>, <span class="dt">na.strings=</span><span class="kw">c</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot; &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb186-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(Gender, GROUP) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb186-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">sample_size=</span><span class="kw">n</span>(), <span class="dt">mean_aosi_ts_V6=</span><span class="kw">mean</span>(V06.aosi.total_score_<span class="dv">1</span>_<span class="dv">18</span>), <span class="dt">mean_aosi_ts_V12=</span><span class="kw">mean</span>(V12.aosi.total_score_<span class="dv">1</span>_<span class="dv">18</span>))</a></code></pre></div>
<pre><code>## # A tibble: 8 x 5
## # Groups:   Gender [2]
##   Gender GROUP  sample_size mean_aosi_ts_V6 mean_aosi_ts_V12
##   &lt;fct&gt;  &lt;fct&gt;        &lt;int&gt;           &lt;dbl&gt;            &lt;dbl&gt;
## 1 Female HR_ASD          20              NA               NA
## 2 Female HR_neg         145              NA               NA
## 3 Female LR_ASD           1               6                5
## 4 Female LR_neg          69              NA               NA
## 5 Male   HR_ASD          75              NA               NA
## 6 Male   HR_neg         173              NA               NA
## 7 Male   LR_ASD           2               8                3
## 8 Male   LR_neg         102              NA               NA</code></pre>
<p>As a result, no objects are saved in R, making this code very efficient if you do not plan on using the aosi_data dataset for eany other analyses.</p>
<p>If you want to save the results of this code as a new dataset, just use new_data &lt;- … as usual to save the output as a data object in R named new_data. This underscores how R is a language and has fundamental rules which allow your instructions to be understood by the software. If you can understand these rules and properties, you can apply them in general and understand how R is operating under the surface. This knowledge allows you to go beyond memorizing specific commands and examples, providing the ability to continually learn new techniques in R.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" title="1">new_data &lt;-</a>
<a class="sourceLine" id="cb188-2" title="2"><span class="kw">read.csv</span>(<span class="st">&quot;Data/cross-sec_aosi.csv&quot;</span>, <span class="dt">na.strings=</span><span class="kw">c</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot; &quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb188-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(Gender, GROUP) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb188-4" title="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">sample_size=</span><span class="kw">n</span>(), <span class="dt">mean_aosi_ts_V6=</span><span class="kw">mean</span>(V06.aosi.total_score_<span class="dv">1</span>_<span class="dv">18</span>), <span class="dt">mean_aosi_ts_V12=</span><span class="kw">mean</span>(V12.aosi.total_score_<span class="dv">1</span>_<span class="dv">18</span>)) </a>
<a class="sourceLine" id="cb188-5" title="5"></a>
<a class="sourceLine" id="cb188-6" title="6">new_data</a></code></pre></div>
<pre><code>## # A tibble: 8 x 5
## # Groups:   Gender [2]
##   Gender GROUP  sample_size mean_aosi_ts_V6 mean_aosi_ts_V12
##   &lt;fct&gt;  &lt;fct&gt;        &lt;int&gt;           &lt;dbl&gt;            &lt;dbl&gt;
## 1 Female HR_ASD          20              NA               NA
## 2 Female HR_neg         145              NA               NA
## 3 Female LR_ASD           1               6                5
## 4 Female LR_neg          69              NA               NA
## 5 Male   HR_ASD          75              NA               NA
## 6 Male   HR_neg         173              NA               NA
## 7 Male   LR_ASD           2               8                3
## 8 Male   LR_neg         102              NA               NA</code></pre>
</div>
<div id="editing-factor-variables-recode-and-relevel" class="section level3">
<h3><span class="header-section-number">4.2.6</span> Editing factor variables: recode() and relevel()</h3>
<p>Recall categorical variables are referred to as <strong>factor</strong> variables in R. Every factor variable also includes a set of <strong>levels</strong> which is an vector containing the group labels, in a specific order. Often times you will want to either 1) change these group levels or 2) change the order of these group levels. Changing the levels can be done easily with the function <strong>fct_recode()</strong> and changing the order can be done easily with the function <strong>fct_relevel()</strong>. These functions are actually in the <strong>forcats</strong> package.</p>
<p>To use fct_recode(), the first argument is the factor variable vector, and then you specify the old and desired new value for the group levels you wish to change using “new”=“old” where old is the old level and new is the new level. You then separate each level change with commas. We take the AOSI data and change “HR_neg” to “HR_NoASD” and “LR_neg” to “LR_NoASD” below. Note that we only print the first 10 observations.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" title="1"><span class="kw">library</span>(forcats)</a>
<a class="sourceLine" id="cb190-2" title="2"><span class="kw">fct_recode</span>(aosi_data<span class="op">$</span>GROUP, <span class="st">&quot;HR_NoASD&quot;</span>=<span class="st">&quot;HR_neg&quot;</span>, <span class="st">&quot;LR_NoASD&quot;</span>=<span class="st">&quot;LR_neg&quot;</span>)[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</a></code></pre></div>
<pre><code>##  [1] HR_ASD   HR_ASD   HR_ASD   HR_ASD   HR_NoASD HR_NoASD HR_ASD  
##  [8] HR_ASD   HR_NoASD HR_ASD  
## Levels: HR_ASD HR_NoASD LR_ASD LR_NoASD</code></pre>
<p>To permanently change the GROUP variable in the dataset, we can use the pipe. Since we are changing the variable, we actually have to use mutate() to have R overwrite the old GROUP variable.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" title="1">aosi_data_<span class="dv">2</span> &lt;-<span class="st"> </span>aosi_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb192-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">GROUP=</span><span class="kw">fct_recode</span>(GROUP, <span class="st">&quot;HR_NoASD&quot;</span>=<span class="st">&quot;HR_neg&quot;</span>, <span class="st">&quot;LR_NoASD&quot;</span>=<span class="st">&quot;LR_neg&quot;</span>))</a>
<a class="sourceLine" id="cb192-3" title="3"></a>
<a class="sourceLine" id="cb192-4" title="4">aosi_data_<span class="dv">2</span><span class="op">$</span>GROUP[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</a></code></pre></div>
<pre><code>##  [1] HR_ASD   HR_ASD   HR_ASD   HR_ASD   HR_NoASD HR_NoASD HR_ASD  
##  [8] HR_ASD   HR_NoASD HR_ASD  
## Levels: HR_ASD HR_NoASD LR_ASD LR_NoASD</code></pre>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" title="1"><span class="co"># Same result</span></a></code></pre></div>
<p>Now, we rearrange these levels using fct_relevel. Note that this does <strong>NOT</strong> change the actual values of the variable in data, simply what order R considers when using these group levels. This order is important when sorting the dataset, plotting, running linear regression and ANOVA analyses, and in other contexts. To use fct_relevel(), the first argument is the factor variable vector, then list the levels in increasing order using strings. For example, using the new group levels from fct_recode, we change the diagnosis group label order to start at Low Risk: Negative and end at High Risk: ASD.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb195-1" title="1"><span class="kw">fct_relevel</span>(aosi_data_<span class="dv">2</span><span class="op">$</span>GROUP, <span class="st">&quot;LR_NoASD&quot;</span>, <span class="st">&quot;LR_ASD&quot;</span>, <span class="st">&quot;HR_NoASD&quot;</span>, <span class="st">&quot;HR_ASD&quot;</span>)[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</a></code></pre></div>
<pre><code>##  [1] HR_ASD   HR_ASD   HR_ASD   HR_ASD   HR_NoASD HR_NoASD HR_ASD  
##  [8] HR_ASD   HR_NoASD HR_ASD  
## Levels: LR_NoASD LR_ASD HR_NoASD HR_ASD</code></pre>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb197-1" title="1"><span class="co"># Notice the Levels: row</span></a></code></pre></div>
<p>To change the variable permanently in the dataset, we again need to use mutate() and can use the pipe for cleaner looking code.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" title="1">aosi_data_<span class="dv">3</span> &lt;-<span class="st"> </span>aosi_data_<span class="dv">2</span> <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb198-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">GROUP=</span><span class="kw">fct_relevel</span>(GROUP, <span class="st">&quot;LR_NoASD&quot;</span>, <span class="st">&quot;LR_ASD&quot;</span>, <span class="st">&quot;HR_NoASD&quot;</span>, <span class="st">&quot;HR_ASD&quot;</span>))</a>
<a class="sourceLine" id="cb198-3" title="3"></a>
<a class="sourceLine" id="cb198-4" title="4">aosi_data_<span class="dv">3</span><span class="op">$</span>GROUP[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</a></code></pre></div>
<pre><code>##  [1] HR_ASD   HR_ASD   HR_ASD   HR_ASD   HR_NoASD HR_NoASD HR_ASD  
##  [8] HR_ASD   HR_NoASD HR_ASD  
## Levels: LR_NoASD LR_ASD HR_NoASD HR_ASD</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" title="1"><span class="co"># Same result</span></a></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="objects-and-functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="creating-graphs-with-ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
